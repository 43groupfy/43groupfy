<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Seize the day" />
    <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicons/favicon-32x32.png" type="image/png" />
    <link rel="canonical" href="http://localhost:4000/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="PIGBEAN Tech blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)" />
    <meta property="og:description" content="처음에 Catty 웹앱은 리액트 CSR로 개발되었다. CSR로 개발한 이유라면 SSR이 익숙치 않았고, 좀 더 빨리 프로토타입을 개발하고 싶어서 정도였던 거 같다. 그러나 SEO 대응하면서 이슈가 발생했고 Next.js로 옮겨가야하나 생각했지만 일이 너무 커질 거 같아 CSR에서 SEO 비스무리하게 할 수 있는 다양한 툴들로 나름 SEO 최적화를 해보려고 하였다. 하지만…결국 다 포기하고" />
    <meta property="og:url" content="http://localhost:4000/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)" />
    <meta property="og:image" content="http://localhost:4000/assets/img/post_images/catty_cover2.png" />
    <meta property="article:publisher" content="https://www.facebook.com/false" />
    <meta property="article:author" content="https://www.facebook.com/false" />
    <meta property="article:published_time" content="2022-04-09T17:32:00+09:00" />
    <meta property="article:modified_time" content="2022-04-09T17:32:00+09:00" />
    <meta property="article:tag" content="Catty" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)" />
    <meta name="twitter:description" content="처음에 Catty 웹앱은 리액트 CSR로 개발되었다. CSR로 개발한 이유라면 SSR이 익숙치 않았고, 좀 더 빨리 프로토타입을 개발하고 싶어서 정도였던 거 같다. 그러나 SEO 대응하면서 이슈가 발생했고 Next.js로 옮겨가야하나 생각했지만 일이 너무 커질 거 같아 CSR에서 SEO 비스무리하게 할 수 있는 다양한 툴들로 나름 SEO 최적화를 해보려고 하였다. 하지만…결국 다 포기하고" />
    <meta name="twitter:url" content="http://localhost:4000/" />
    <meta name="twitter:image" content="http://localhost:4000/assets/img/post_images/catty_cover2.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="PIGBEAN Tech blog" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Catty" />
    <meta name="twitter:site" content="@false" />
    <meta name="twitter:creator" content="@false" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "PIGBEAN Tech blog",
        "logo": "http://localhost:4000/assets/img/favicons/android-chrome-256x256.png"
    },
    "url": "http://localhost:4000/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:4000/assets/img/post_images/catty_cover2.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)"
    },
    "description": "처음에 Catty 웹앱은 리액트 CSR로 개발되었다. CSR로 개발한 이유라면 SSR이 익숙치 않았고, 좀 더 빨리 프로토타입을 개발하고 싶어서 정도였던 거 같다. 그러나 SEO 대응하면서 이슈가 발생했고 Next.js로 옮겨가야하나 생각했지만 일이 너무 커질 거 같아 CSR에서 SEO 비스무리하게 할 수 있는 다양한 툴들로 나름 SEO 최적화를 해보려고 하였다. 하지만…결국 다 포기하고"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="http://localhost:4000/"><img src="/assets/img/favicons/android-chrome-256x256.png" alt="PIGBEAN Tech blog" /></a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/Catty/">Catty</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-catty tag-next post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 9 April 2022"> 9 April 2022</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/catty/'>CATTY</a>,
                            
                        
                            
                               <a href='/tag/next/'>NEXT</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/img/post_images/catty_cover2.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>처음에 Catty 웹앱은 리액트 CSR로 개발되었다. CSR로 개발한 이유라면 SSR이 익숙치 않았고, 좀 더 빨리 프로토타입을 개발하고 싶어서 정도였던 거 같다.
그러나 SEO 대응하면서 이슈가 발생했고 Next.js로 옮겨가야하나 생각했지만 일이 너무 커질 거 같아 CSR에서 SEO 비스무리하게 할 수 있는 다양한 툴들로 나름 SEO 최적화를 해보려고 하였다.</p>

<p>하지만…결국 다 포기하고 Next.js로 옮겨가게 되었다…ㅎ 기존의 리액트 프로젝트를 Next로 옮기는데 1주일 정도 소요되었다. 이번 글에서는 갈아엎기 까지 CSR을 고수하기 위해서 한 여러 시행착오와 결국 Next.js 로 옮기며 겪은 다양한 에러에 대해서 남겨보려고 한다.</p>

<h2 id="react-snap과-react-helmat-라이브러리">react-snap과 react-helmat 라이브러리</h2>
<hr />
<p>먼저 CSR에서 react-snap이라는 라이브러리를 사용할 수 있다. <a href="https://byseop.netlify.app/csr-seo/">https://byseop.netlify.app/csr-seo/</a>
그렇지만 블로그를 참고해서 다 적용을 하니까 재밌는 문제가 발생하였다.</p>

<p>Catty 처음 진입 로직은 다음과 같이 설계되어 있는데,</p>

<div class="mermaid">
  graph LR;
  A(랜딩페이지)--&gt;B[자동로그인 확인];
  B--&gt;C(로그인 페이지);
  B--&gt;D(메인페이지);
</div>

<p>메인페이지에 진입하기 전에 랜딩페이지의 DOM을 생성하고 이를 없애지 않은 채로 메인페이지에 들어가다보니 메인페이지의 배경화면으로 랜딩페이지의 DOM이 남아있는 문제가 생겼다. 이외에도 CSS가 많이 깨지고, 무엇보다 react-snap이 최근 2년 동안 업데이트를 하지 않은 정지된 라이브러리 같아 그냥 이런식말고 다른 방법을 찾기로 결정했다.</p>

<p> </p>

<h2 id="webpack과-babel-설정을-통해-nextjs-없이-ssr-구축">webpack과 babel 설정을 통해 Next.js 없이 SSR 구축</h2>
<hr />

<p>그러던 중 <a href="https://minoo.medium.com/next-js-%EC%B2%98%EB%9F%BC-server-side-rendering-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-7608e82a0ab1">React로 Next.js 처럼 Server-side-rendering 구현하기</a> 라는 미디엄 포스팅을 발견하였고 괜찮은 거 같아 프로젝트에 적용해보았다. 적용하는 건 이 블로그 포스팅을 따라한 것이 전부라 따로 적지는 않을 것이다.</p>

<h3 id="window-is-not-defined-에러">window is not defined 에러</h3>
<hr />

<p>그렇게 다 설정을 완료했는데 window, document, self 등 객체에 접근할 때 <code class="language-plaintext highlighter-rouge">not defined</code> error가 발생하였다.</p>

<p>window 객체는 브라우저의 요소들과 자바스크립트 엔진, 그리고 모든 변수를 담고 있는 객체이다. 인터넷 브라우저를 보면 위에 탭들도 있고, 주소창도 있고, 즐겨찾기, 툴바 등이 있다. 그 다음부터는 이제 웹사이트가 표시된다. 여기서 브라우저 전체를 담당하는 게 window 객체이고, 웹사이트만 담당하는게 document 객체라고 볼 수 있다.</p>

<p>이런 window, document 브라우저 객체는 말그대로 <strong>브라우저</strong>의 객체이기 때문에 서버에는 존재하지 않는다. 따라서 SSR으로 이 브라우저 객체에 접근하려고 하면 에러가 발생한다. 이런 에러를 해결하기 위한 방법은 다음 포스팅(<a href="">SSR에서 window 객체가 없다고 할 때</a>) 에 정리해두었다. Catty 웹앱도 이런 방법들을 이용하여 에러를 해결하려고 했지만, Catty 웹앱은 외부 라이브러리를 사용해서 useEffect에 넣지 못하는 상황이 있었다. 그래서 Next.js의 dynamic 기능 처럼 특정 component에서만 SSR을 끄고 싶었지만, 지금 webpack 구성에서 맞는 방법을 찾지 못하였다(..) 그래서 결국 특정 컴포넌트에서 SSR을 끌 수 있게 하는 dynamic 기능이 있는 Next.js로 옮겨가게 되었다.</p>

<p> </p>

<h2 id="reactjs-프로젝트를-nextjs로-옮기기">React.js 프로젝트를 Next.js로 옮기기</h2>
<hr />

<p>결국 돌고돌아 Next.js로 옮겨가게 되었다. 지금 프로젝트 폴더에서 Next.js을 import하면 예상치 못한 충돌이 발생할 수 있을 거 같아, 새롭게 Next.js로 프로젝트 폴더를 만들어서 기존 코드 파일을 하나씩 옮기기로 하였다.</p>

<h3 id="nextjs란">Next.js란?</h3>
<hr />

<p>먼저 시작하기 전에 Next.js를 한 번 짚고 넘어갈 것이다. <a href="https://nextjs.org/">Next.js</a>는 React 프레임워크이다. Next.js는 크게 다음의 기능을 지원한다.</p>
<ul>
  <li>다이나믹 라우트를 지원하는 직관적인 페이지 기반의 라우팅 시스템</li>
  <li>각 페이지 마다 기본적으로 사전 렌더링, SSG(Static Generation)과 SSR(Server-Side Rendering)을 지원한다.</li>
  <li>빠른 페이지 로딩을 위한 자동 코드 스플릿팅</li>
  <li>최적화된 프리페칭을 이용한 클라이언트 사이드 라우팅</li>
  <li>Built-in CSS과 Sass 지원, 그리고 다른 CSS-in-JS 라이브러리 지원</li>
  <li>개발 환경에서의 빠른 리프레시 지원</li>
  <li>서버리스 환경에서 API를 구축하기 위한 API라우트</li>
  <li>넓은 확장성</li>
</ul>

<p>이처럼 많은 기능을 제공하고 있는 Next.js는 세계적으로 유명한 기업들을 포함하여 수많은 웹사이트와 웹 애플리케이션에서 사용되고 있다. Next.js 세팅하는 법은 검색해보면 많이 나와서 건너띄고 Next.js 사용하면서 특징적이라고 생각하는 부분만 따로 정리하겠다.</p>

<h3 id="pages와-nextlink">pages와 Next/Link</h3>
<hr />

<p>Next.js를 사용하면서 다음과 같이 폴더 구조를 짰다.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
// 어플리케이션에 사용되는 정적 파일들
public
  └── asset
        ├── images
        └── icons

// 어플리케이션의 기능에 사용되는 소스들
src
  ├── component                    // 컴포넌트들 모음
  │      ├── common                // 공통적으로 사용되는 컴포넌트들
  │      └── 페이지별 컴포넌트          // 각 페이지에서 사용되는 컴포넌트
  ├── containers                   // 컨테이너(store값이 전달된 컴포넌트)들 모음
  │      ├── common                // 공통적으로 사용되는 컨테이너
  │      └── 페이지별 컨테이너          // 각 페이지에서 사용되는 컨테이너
  ├── store                        // redux store 관련 파일 모음
  │      ├── modules
  │      └── index.js
  ├── utils                        // util 함수 모듬
  │      ├── hooks
  │      └── 기타 util 함수들
  ├── theme                       // 테마 관련 파일 모음
  │      ├── globals.css
  │      └── Home.modules.css
  └── styles                      // 스타일 관련 파일 모음
         ├── globals.css
         └── Home.modules.css

// 페이지를 담당하는 컴포넌트(폴더구조로 url 결정)
pages
  │                         // (❗ Nextjs에서는 Routing 시스템이 파일/폴더 구조로 되어있다.)
  ├── index.tsx
  ├── _app.tsx              // 각 페이지별로 공통적으로 쓰는 부분에 대한 리펙토링을 해주는 곳
  │                         // (index.js파일과 같은 역할, 모든 페이지에서 쓰는 스타일, 레이아웃 을 넣어 주기)
  ├── _document.tsx         //  meta태그를 정의 및 전체 페이지의 구조를 만들어준다
  │                         // (index.html파일과 같은 역할, html body와 같은 기본 태그들의 속성지정하여 어플리케이션의 구조를 만들어 주는 파일)
  ├── api                   // axios를 이용하여 서버와의 통신 로직을 담당
  └── product
        └── [id].tsx
</code></pre></div></div>

<p>다른 부분은 기존과 비슷한데, pages라는 폴더가 새로 생겼다. 이 페이지 폴더가 쉽게 말해 Next.js의 라우팅 시스템을 구성한다.
pages의 index.tsx 파일은 ‘localhost:3000’에 접속했을 때 뜨는 화면이 되고, pages의 ‘sample-folder/sample-file.tsx’의 파일은 ‘localhost:3000/sample-folder/sample-file’에 접속해서 뜨는 화면이 된다.</p>

<p>페이지 라우팅은 <code class="language-plaintext highlighter-rouge">&lt;Link href="/경로"&gt;</code>를 사용하면 된다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import Link from 'next/Link';

<span class="nt">&lt;Link</span> <span class="na">href=</span><span class="s">"/about"</span><span class="nt">&gt;</span>    // pages 내 about 파일로 라우팅 됨(파일명 = 경로)
  <span class="nt">&lt;a&gt;</span> 이동하기 <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/Link&gt;</span>
// (만약 <span class="nt">&lt;a&gt;</span>태그를 사용하지 않는다면 해당 컴포넌트가 onClick props를 전달받아서 실행할 수 있게 해야한다)
</code></pre></div></div>

<h3 id="redux">Redux</h3>
<hr />
<p>기존에 react 프로젝트에서 Redux를 사용했기 때문에 Next.js에서도 계속해서 Redux를 사용하였다. 먼저 Redux를 사용하기 위해 필요한 라이브러리들을 설치해줘야한다.
이 때, Next에서 redux를 사용하기 위해서는 next-redux-wrapper가 필요하기 때문에 함께 설치해준다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">redux</span> <span class="nx">react</span><span class="o">-</span><span class="nx">redux</span> <span class="nx">next</span><span class="o">-</span><span class="nx">redux</span><span class="o">-</span><span class="nx">wrapper</span>
</code></pre></div></div>

<p>그리고 다음의 블로그 <a href="https://kir93.tistory.com/entry/NextJS-Redux-Toolkit-next-redux-wrapper-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0">https://kir93.tistory.com/entry/NextJS-Redux-Toolkit-next-redux-wrapper</a>를 참고해서 추가 설정을 했다.</p>

<h3 id="dynamic">dynamic</h3>
<hr />
<p>Next.js에서도 마찬가지로 서버사이드에서는 브라우저 객체를 사용할 수 없기 때문에 <code class="language-plaintext highlighter-rouge">window is not defined</code> 에러가 뜬다. 따라서 브라우저 객체를 사용하는 컴포넌트에서는 SSR을 꺼두어야 하는데, <a href="">SSR에서 window 객체가 없다고 할 때</a> 글에 정리했듯이 다음과 같이 SSR을 꺼서 에러를 방지할 수 있다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import dynamic from 'next/dynamic'

const ComponentsWithNoSSR = dynamic<span class="nt">&lt;</span><span class="err">{</span><span class="na">props:type</span><span class="err">;}</span><span class="nt">&gt;</span>( // typescript에서 props를 전달할때 interface를 정의해줍니다.
  () =&gt; import('./components/Component'), // Component로 사용할 항목을 import합니다.
  { ssr: false } // ssr옵션을 false로 설정해줍니다.
);

const App = () =&gt; {
  return(
    <span class="nt">&lt;div&gt;</span>
    	<span class="nt">&lt;Components/&gt;</span> // 해당 컴포넌트는 SSR로 불러올 수 있습니다.

    	<span class="nt">&lt;ComponentsWithNoSSR/&gt;</span> // 해당 컴포넌트는 ssr:false이기 때문에 서버사이드 렌더를 하지않습니다.
    <span class="nt">&lt;/div&gt;</span>
  )
};
</code></pre></div></div>

<h3 id="nextimage">next/Image</h3>
<hr />
<p>기존에 이미지는 <code class="language-plaintext highlighter-rouge">&lt;img&gt;</code> 태그를 사용하여 추가하였지만, Next.js에서 이렇게 사용하면 warning을 띄운다. 물론 warning을 무시하고 계속 사용해도 서비스가 잘 돌아가긴 하지만 next/Image가 Next.js에서 이미지를 표시하는 데 최적화되어 있다고 하여 next/Image로 다 수정하였다. next/Image는 기존 <code class="language-plaintext highlighter-rouge">&lt;img&gt;</code> 태그와 거의 비슷한데, width/hight를 명시해주거나, layout props에 ‘fill’이라고 명시해줘야 한다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import Image from 'next/Image'

<span class="nt">&lt;div</span> <span class="na">width=</span><span class="s">'80px'</span> <span class="na">height=</span><span class="s">'80px'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;Image</span>
    <span class="na">src=</span><span class="s">{sampleImage}</span>
    <span class="na">onError=</span><span class="s">{onHandledError}</span>
    <span class="na">alt=</span><span class="s">'sample image'</span>
    <span class="na">layout=</span><span class="s">'fill'</span>
    <span class="na">objectFit=</span><span class="s">"cover"</span>
    <span class="na">unoptimized</span>
    <span class="na">loader=</span><span class="s">{loaderProp}</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;Image</span>
  <span class="na">src=</span><span class="s">{sampleImage}</span>
  <span class="na">alt=</span><span class="s">'sample image'</span>
  <span class="na">width=</span><span class="s">{64}</span>
  <span class="na">height=</span><span class="s">{64}</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<h3 id="seo">SEO</h3>
<hr />
<p>처음에 SSR을 쓰려고 했던 근본적인 이유 중 하나였던 SEO를 마지막으로 설정해주었다. SEO는 <code class="language-plaintext highlighter-rouge">next/head</code> 라이브러리를 사용하면 쉽게 설정할 수 있다. 다음에 <code class="language-plaintext highlighter-rouge">next/head</code>로 SEO를 설정한 코드를 정리하였다. 이 SEO 컴포넌트를 SEO를 설정하고 싶은 컴포넌트에 추가하면 SEO 설정이 끝난다!</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import Head from 'next/head'

export default function SEO({ title, siteTitle, description, creator, image, summary }) {
  return (
    <span class="nt">&lt;Head&gt;</span>
      <span class="nt">&lt;title&gt;</span>{`${title} | ${siteTitle}`}<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">{description}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:type"</span> <span class="na">content=</span><span class="s">"website"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:title"</span> <span class="na">content=</span><span class="s">{title}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:description"</span> <span class="na">content=</span><span class="s">{description}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:site_name"</span> <span class="na">content=</span><span class="s">{siteTitle}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:type"</span> <span class="na">content=</span><span class="s">{"website"}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:image"</span> <span class="na">content=</span><span class="s">{image}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"twitter:card"</span> <span class="na">content=</span><span class="s">"summary"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"twitter:creator"</span> <span class="na">content=</span><span class="s">{creator}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"twitter:title"</span> <span class="na">content=</span><span class="s">{title}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"twitter:description"</span> <span class="na">content=</span><span class="s">{description}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"image_src"</span> <span class="na">href=</span><span class="s">{image}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">itemProp=</span><span class="s">"image"</span> <span class="na">content=</span><span class="s">{image}</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"fb:pages"</span> <span class="na">content=</span><span class="s">"Catty, my knowledge base"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Head&gt;</span>
  )
}
</code></pre></div></div>

<p> </p>

<hr />

<h4 id="참고-내용-출처-">참고 내용 출처 :</h4>
<p><a href="https://velog.io/@kirin/Next.js-%ED%8E%98%EC%9D%B4%EC%A7%80-%EA%B5%AC%EC%A1%B0">https://velog.io/@kirin/Next.js-%ED%8E%98%EC%9D%B4%EC%A7%80-%EA%B5%AC%EC%A1%B0</a>
<a href="https://www.zerocho.com/category/JavaScript/post/573b321aa54b5e8427432946">https://www.zerocho.com/category/JavaScript/post/573b321aa54b5e8427432946</a></p>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/img/style/beanie.png" alt="Bean" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/Bean">Beanie</a></h4>
                                
                                    <p>Hello, I’m Beanie, always pondering and crafting services to make life fun and convenient</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/Bean">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = 'http://localhost:4000/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)';
                            var this_page_identifier = '/CSR project를 SSR로 옮기기 (3.31~4.08)';
                            var this_page_title = 'CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://PIGBEAN.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/img/style/bean.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; PIGBEAN Tech blog &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/catty/">Catty</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/%EB%A6%AC%EC%86%8C%EC%8A%A4-%EA%B8%B0%EB%B0%98-%EB%85%B8%ED%8A%B8-%EC%9E%91%EC%84%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-Catty-%EC%86%8C%EA%B0%9C">리소스 기반 노트 작성 서비스 Catty 소개</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/%ED%81%AC%EB%A1%AC-%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98-%ED%8C%8C%EC%9D%BC-%ED%81%AC%EA%B8%B0-400mb%EC%97%90%EC%84%9C-4mb%EB%A1%9C-%EC%A4%84%EC%9D%B4%EA%B8%B0(/)">크롬 익스텐션 파일 크기 400mb에서 4mb로 줄이기(..)</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/%EC%9B%B9%EC%95%B1-%ED%81%B4%EB%A6%BD%EB%B3%B4%EB%93%9C-%EB%A6%AC%EC%8A%A4%EB%84%88-%EB%A7%8C%EB%93%A4%EA%B8%B0">웹앱 클립보드 리스너 만들기</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/catty/">
                                
                                    See all 10 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/SSR%EC%97%90%EC%84%9C-window-%EA%B0%9D%EC%B2%B4%EA%B0%80-%EC%97%86%EB%8B%A4%EA%B3%A0-%ED%95%A0-%EB%95%8C">
                <div class="post-card-image" style="background-image: url(/assets/img/post_images/next_cover.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/SSR%EC%97%90%EC%84%9C-window-%EA%B0%9D%EC%B2%B4%EA%B0%80-%EC%97%86%EB%8B%A4%EA%B3%A0-%ED%95%A0-%EB%95%8C">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Catty</span>
                            
                        
                            
                                <span class="post-card-tags">Next</span>
                            
                        
                    

                    <h2 class="post-card-title">When SSR says that there is no window object</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>Use typeof

```html
if(window){…} // window is not defined error occur

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/img/style/beanie.png" alt="Beanie" />
                        
                        <span class="post-card-author">
                            <a href="/author/Bean/">Beanie</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)">
                <div class="post-card-image" style="background-image: url(/assets/img/post_images/catty_cover2.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Catty</span>
                            
                        
                            
                                <span class="post-card-tags">Typesense</span>
                            
                        
                    

                    <h2 class="post-card-title">Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>Firestore는 전체 텍스트 검색이 되지 않는다. Firebase 공식 문서에서도 Cloud Firestore은 문서 텍스트 필드 검색이 지원되지 않으며 타사 전용 서비스를 사용하라고 추천하고 있다. 여기서 추천하는 서비스는 Elastic, Algolia, Typesense 3가지 인데 그 중에서</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/img/style/beanie.png" alt="Beanie" />
                        
                        <span class="post-card-author">
                            <a href="/author/Bean/">Beanie</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      3 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="http://localhost:4000/">
            
                <img src="/assets/img/favicons/favicon-32x32.png" alt="PIGBEAN Tech blog icon" />
            
            <span>PIGBEAN Tech blog</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=CSR+project%28create-react-app%29%EB%A5%BC+SSR%28Next.js%29%EB%A1%9C+%EC%98%AE%EA%B8%B0%EA%B8%B0+%283.31~4.08%29&amp;url=https://beanie00.github.io/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://beanie00.github.io/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://localhost:4000/">PIGBEAN Tech blog</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
