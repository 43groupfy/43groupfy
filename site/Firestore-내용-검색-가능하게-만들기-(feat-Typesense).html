<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Seize the day" />
    <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicons/favicon-32x32.png" type="image/png" />
    <link rel="canonical" href="http://localhost:4000/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="PIGBEAN Tech blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)" />
    <meta property="og:description" content="Firestore는 전체 텍스트 검색이 되지 않는다. Firebase 공식 문서에서도 Cloud Firestore은 문서 텍스트 필드 검색이 지원되지 않으며 타사 전용 서비스를 사용하라고 추천하고 있다. 여기서 추천하는 서비스는 Elastic, Algolia, Typesense 3가지 인데 그 중에서 Catty 서비스에는 Typesense를 사용하였다. Catty 서비스에 typesense를 사용한 이유는 원하는 기능이 다 있으면서 가격이 가장 합리적이기 때문이다." />
    <meta property="og:url" content="http://localhost:4000/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)" />
    <meta property="og:image" content="http://localhost:4000/assets/img/post_images/catty_cover2.png" />
    <meta property="article:publisher" content="https://www.facebook.com/false" />
    <meta property="article:author" content="https://www.facebook.com/false" />
    <meta property="article:published_time" content="2022-04-09T17:32:00+09:00" />
    <meta property="article:modified_time" content="2022-04-09T17:32:00+09:00" />
    <meta property="article:tag" content="Catty" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)" />
    <meta name="twitter:description" content="Firestore는 전체 텍스트 검색이 되지 않는다. Firebase 공식 문서에서도 Cloud Firestore은 문서 텍스트 필드 검색이 지원되지 않으며 타사 전용 서비스를 사용하라고 추천하고 있다. 여기서 추천하는 서비스는 Elastic, Algolia, Typesense 3가지 인데 그 중에서 Catty 서비스에는 Typesense를 사용하였다. Catty 서비스에 typesense를 사용한 이유는 원하는 기능이 다 있으면서 가격이 가장 합리적이기 때문이다." />
    <meta name="twitter:url" content="http://localhost:4000/" />
    <meta name="twitter:image" content="http://localhost:4000/assets/img/post_images/catty_cover2.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="PIGBEAN Tech blog" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Catty" />
    <meta name="twitter:site" content="@false" />
    <meta name="twitter:creator" content="@false" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
        }
        });
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "PIGBEAN Tech blog",
        "logo": "http://localhost:4000/assets/img/favicons/android-chrome-256x256.png"
    },
    "url": "http://localhost:4000/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:4000/assets/img/post_images/catty_cover2.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)"
    },
    "description": "Firestore는 전체 텍스트 검색이 되지 않는다. Firebase 공식 문서에서도 Cloud Firestore은 문서 텍스트 필드 검색이 지원되지 않으며 타사 전용 서비스를 사용하라고 추천하고 있다. 여기서 추천하는 서비스는 Elastic, Algolia, Typesense 3가지 인데 그 중에서 Catty 서비스에는 Typesense를 사용하였다. Catty 서비스에 typesense를 사용한 이유는 원하는 기능이 다 있으면서 가격이 가장 합리적이기 때문이다."
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)" href="/feed.xml" />



</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="http://localhost:4000/"><img src="/assets/img/favicons/android-chrome-256x256.png" alt="PIGBEAN Tech blog" /></a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/Catty/">Catty</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-catty tag-typesense post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 9 April 2022"> 9 April 2022</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/catty/'>CATTY</a>,
                            
                        
                            
                               <a href='/tag/typesense/'>TYPESENSE</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/img/post_images/catty_cover2.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>Firestore는 전체 텍스트 검색이 되지 않는다. <a href="https://firebase.google.com/docs/firestore/solutions/search?provider=typesense">Firebase 공식 문서</a>에서도 Cloud Firestore은 문서 텍스트 필드 검색이 지원되지 않으며 타사 전용 서비스를 사용하라고 추천하고 있다. 여기서 추천하는 서비스는 <code class="language-plaintext highlighter-rouge">Elastic</code>, <code class="language-plaintext highlighter-rouge">Algolia</code>, <code class="language-plaintext highlighter-rouge">Typesense</code> 3가지 인데 그 중에서 Catty 서비스에는 <a href="https://typesense.org/">Typesense</a>를 사용하였다.</p>

<p>Catty 서비스에 typesense를 사용한 이유는 원하는 기능이 다 있으면서 가격이 가장 합리적이기 때문이다. 뿐만 아니라 사실 돈을 지불하는 부분은 클라우드 서비스이고 도커에 별도로 시스템을 구축한다면 그마저도 내지 않아도 괜찮다. 그렇지만 지금은 별도의 시스템을 만들 여력이 없기 때문에 그냥 돈내고 클라우드 서비스를 사용했다.</p>

<h2 id="firestore-대신-typesense">Firestore 대신 Typesense</h2>
<p> </p>

<p>Typesense를 사용하려고 맘먹고 보니 Firestore랑 Typesense를 이중으로 사용할 필요는 없어서 Typesense를 메인으로 사용하고, Firestore은 보조 역할로만 남겨두었다. 좀 더 구체적으로는 메인 DB를 Typesense로 하되 Typesense에 저장이 안되는 data type(object)만 Firestore에 별도로 저장했다. 또한, 크롬 익스텐션과 모바일에서는 Firestore에 리소스를 저장하고 Firebase cloud function을 통해 서버에서 firestore에 들어온 데이터를 typesensedp 넘기도록 구현하였다. 굳이 이렇게 비효율적으로 하는 이유는 크롬 익스텐션과 모바일에서 typesense를 사용할 최적의 방법을 못찾았기 때문인데(..) 사실 좀만 더 서치하면 찾을 수 있을 것도 같으나 우선 별 문제없이 잘 돌아가고 있어 다른 이슈에 비해 우선순위가 많이 밀려있긴 하다.</p>

<p>Typesense의 단점이라면 다른 서비스에 비해 참고 문서를 찾기가 어렵다. 물론 공식 문서가 잘되어 있긴 하나 헷갈리는 부분이 있을 때 다른 서비스에 비해 관련 리소스를 찾기 조금 어려운 편이었다. 그래서 이번 글에서 Typesense를 이용하면서 알게된 내용들을 조금 정리해보려고 한다.</p>

<h2 id="typesense-환경-설정">Typesense 환경 설정</h2>
<p> </p>

<p>우선 Typesense를 사용하기 위해서는 <a href="https://cloud.typesense.org/clusters">https://cloud.typesense.org/clusters</a> Typesense cloud에 들어가서 collection을 생성해야 한다. collection 이름과 각 field의 이름과 type을 적어둔 다음에 create를 누르면 collection이 생성된다.</p>

<div style="text-align: left">
   <img src="/assets/img/post_images/typesense1.png" width="100%" />
</div>

<p>다음에 웹앱을 개발하는 코드로 돌아가서 다음의 initialization 코드를 추가한다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Typesense</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">typesense</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">TYPESENSE_HOST</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_TYPESENSE_HOST</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">TYPESENSE_ADMIN_API_KEY</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_TYPESENSE_ADMIN_API_KEY</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">TYPESENSE_SEARCH_API_KEY</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_TYPESENSE_SEARCH_API_KEY</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Typesense</span><span class="p">.</span><span class="nx">Client</span><span class="p">({</span>
  <span class="dl">'</span><span class="s1">nodes</span><span class="dl">'</span><span class="p">:</span> <span class="p">[{</span>
    <span class="dl">'</span><span class="s1">host</span><span class="dl">'</span><span class="p">:</span> <span class="nx">TYPESENSE_HOST</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">443</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">protocol</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">}],</span>
  <span class="dl">'</span><span class="s1">apiKey</span><span class="dl">'</span><span class="p">:</span> <span class="nx">TYPESENSE_ADMIN_API_KEY</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">connectionTimeoutSeconds</span><span class="dl">'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div></div>
<p>이렇게 하면 Typesense를 사용할 기초 작업이 모두 끝났다.</p>

<h2 id="document-추가수정삭제">document 추가/수정/삭제</h2>
<p> </p>

<p>Typesense collection에 데이터가 추가되는 단위는 document이다. 이 collection, document 개념은 firestore와 동일하다.</p>

<p>document를 typesense에 추가/수정/삭제하는 방법은 매우매우 간단하다. 추가와 수정의 경우에는 각각 추가/수정할 내용을 object type으로 만들어서 넣어주면 끝난다.
또한 document 삭제의 경우에도 해당 document id로 한 줄의 코드를 실행하면 끝이다.</p>

<ul>
  <li>document 추가
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resource</span> <span class="o">=</span> <span class="p">{}</span> <span class="o">&lt;--</span> <span class="nx">resource</span> <span class="nx">object</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">collections</span><span class="p">(</span><span class="dl">'</span><span class="s1">resources</span><span class="dl">'</span><span class="p">).</span><span class="nx">documents</span><span class="p">().</span><span class="nx">upsert</span><span class="p">(</span><span class="nx">resource</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>document 수정
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resource</span> <span class="o">=</span> <span class="p">{}</span> <span class="o">&lt;--</span> <span class="nx">resource</span> <span class="nx">object</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">collections</span><span class="p">(</span><span class="dl">'</span><span class="s1">resources</span><span class="dl">'</span><span class="p">).</span><span class="nx">documents</span><span class="p">().</span><span class="nx">update</span><span class="p">(</span><span class="nx">resource</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>document 삭제
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resource</span> <span class="o">=</span> <span class="p">{}</span> <span class="o">&lt;--</span> <span class="nx">resource</span> <span class="nx">object</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">collections</span><span class="p">(</span><span class="dl">'</span><span class="s1">resources</span><span class="dl">'</span><span class="p">).</span><span class="nx">documents</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="k">delete</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="document-검색">document 검색</h2>
<p> </p>

<p>Typesense의 강점이자 조금 복잡한 부분은 이 검색 부분이다. 아래 짧은 코드로 Collection에서 다양한 조건으로 document를 검색할 수 있다. 요소들을 하나씩 뜯어 살펴보자.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">searchField</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">q</span><span class="p">,</span>
  <span class="nx">drop_tokens_threshold</span><span class="p">,</span>
  <span class="nx">query_by</span><span class="p">,</span>
  <span class="nx">page</span><span class="p">,</span>
  <span class="nx">per_page</span><span class="p">,</span>
  <span class="nx">filter_by</span><span class="p">,</span>
  <span class="na">sort_by</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">inserted_date:desc</span><span class="dl">'</span><span class="p">,</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">searchResults</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span>
  <span class="p">.</span><span class="nx">collections</span><span class="p">(</span><span class="dl">"</span><span class="s2">resources</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">documents</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">searchField</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">hits</span> <span class="o">=</span> <span class="nx">searchResults</span><span class="p">.</span><span class="nx">hits</span>
<span class="k">return</span> <span class="nx">hits</span>
</code></pre></div></div>

<h3 id="q와-drop_tokens_threshold">q와 drop_tokens_threshold</h3>
<p>q에 검색하고 싶은 단어를 명시하면 그 단어가 포함된 document들을 가져온다. 이 때 ‘hello world’처럼 띄어쓰기로 구분해서 검색하고 싶은 단어를 여러개 지정할 수 있다. 이러면 hello와 world를 모두 포함하는 document를 검색하게 된다. 그렇지만 이렇게 띄어쓰기로 구분된 단어들을 모두 포함하는 document를 찾으면 충분한 양의 검색결과가 없을 경우도 많이 생길 것이다. 이 때, 더 세부적으로 들어가서 <code class="language-plaintext highlighter-rouge">drop_tokens_threshold</code>을 설정하면 내가 원하는 양의 검색 결과가 나올 때 까지 단어들을 빼면서 검색할 수 있다. 즉, hello와 world를 모두 포함하는 document가 많이 없으면 hello를 빼고 world로만으로 검색해보고 반대로 hello로만으로도 검색을 해보고 할 수 있다. 참고로 띄어쓰기로 구분된 단어들을 AND로 연결하는 AND 검색은 지원하지만 OR 검색(hello 또는 world를 포함하는 document)은 지원하지 않는다.</p>

<h3 id="query_by">query_by</h3>
<p>query_by는 collection field 중 어떤 field를 기반으로 검색할 것인지를 명시할 수 있는 부분이다. 예로 collection의 document가 아래와 같은 object 일 때,</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nb">document</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="p">,</span>
  <span class="nx">description</span><span class="p">,</span>
  <span class="nx">memo</span><span class="p">,</span>
  <span class="nx">tags</span><span class="p">,</span>
  <span class="nx">inserted_date</span>
<span class="p">}</span>
</code></pre></div></div>
<p>query_by를 memo로 설정하면 메모에 q의 단어가 포함되어 있는 document들을 검색한다.</p>

<h3 id="page">page</h3>
<p>page는 우리가 일반적으로 게시판앱에서 볼 수 있는 그 페이지를 생각하면 된다. collection에서 몇번 째 페이지의 document들을 가져올 지 결정한다.</p>

<h3 id="per_page">per_page</h3>
<p>per_page는 페이지 당 몇개의 document를 리스트할 지를 결정한다. per_page가 20이면 한 페이지당 20개의 document를 가져오게 된다.</p>

<h3 id="filter_by">filter_by</h3>
<p>filter_by는 다양한 필터를 설정할 수 있는 term이다. 예로 특정 날짜 범위의 document를 검색하거나, 특정 tag를 포함하고 있는 document만 검색할 수 있다. tag는 string 타입으로 작성해야 한다. 여러개 필드의 태그는 <code class="language-plaintext highlighter-rouge">&amp;&amp;</code>로 구분한다. 또한 sampleTag1 또는 sampleTag2를 포함하는 tag로 필터링을 하려면 <code class="language-plaintext highlighter-rouge">tags:[sampleTag1, sampleTag2]</code>와 같이 쓰면 된다.</p>

<p>필터 string 예시는 다음과 같다.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">const</span> <span class="nx">filter_string</span> <span class="o">=</span> <span class="s2">`tags:[sampleTag1, sampleTag2] &amp;&amp; name: sampleName`</span>
</code></pre></div></div>

<h3 id="sort_by">sort_by</h3>
<p>sort_by는 이름에서 직관적으로 알 수 있듯이 정렬 조건을 설정하는 부분이다. 정렬 기준이 되는 field명과 오름차순인지, 내림차순인지만 명시하면 된다. 조금 주의할 것은 아직은 string sorting이 안되고 숫자로만 sorting이 가능하다.</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/img/style/beanie.png" alt="Bean" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/Bean">Beanie</a></h4>
                                
                                    <p>Hello, I’m Beanie, always pondering and crafting services to make life fun and convenient</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/Bean">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = 'http://localhost:4000/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)';
                            var this_page_identifier = '/Firestore 내용 검색 가능하게 만들기 (feat Typesense)';
                            var this_page_title = 'Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://Beanie.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/img/style/bean3.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; PIGBEAN Tech blog &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/catty/">Catty</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/%EB%A6%AC%EC%86%8C%EC%8A%A4-%EA%B8%B0%EB%B0%98-%EB%85%B8%ED%8A%B8-%EC%9E%91%EC%84%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-Catty-%EC%86%8C%EA%B0%9C">리소스 기반 노트 작성 서비스 Catty 소개</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/%ED%81%AC%EB%A1%AC-%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98-%ED%8C%8C%EC%9D%BC-%ED%81%AC%EA%B8%B0-400mb%EC%97%90%EC%84%9C-4mb%EB%A1%9C-%EC%A4%84%EC%9D%B4%EA%B8%B0(/)">크롬 익스텐션 파일 크기 400mb에서 4mb로 줄이기(..)</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/%EC%9B%B9%EC%95%B1-%ED%81%B4%EB%A6%BD%EB%B3%B4%EB%93%9C-%EB%A6%AC%EC%8A%A4%EB%84%88-%EB%A7%8C%EB%93%A4%EA%B8%B0">웹앱 클립보드 리스너 만들기</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/catty/">
                                
                                    See all 10 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)">
                <div class="post-card-image" style="background-image: url(/assets/img/post_images/catty_cover2.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/CSR-project%EB%A5%BC-SSR%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B8%B0-(3.31~4.08)">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Catty</span>
                            
                        
                            
                                <span class="post-card-tags">Next</span>
                            
                        
                    

                    <h2 class="post-card-title">CSR project(create-react-app)를 SSR(Next.js)로 옮기기 (3.31~4.08)</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>처음에 Catty 웹앱은 리액트 CSR로 개발되었다. CSR로 개발한 이유라면 SSR이 익숙치 않았고, 좀 더 빨리 프로토타입을 개발하고 싶어서 정도였던 거 같다. 그러나 SEO 대응하면서 이슈가 발생했고 Next.js로 옮겨가야하나 생각했지만 일이 너무 커질 거</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/img/style/beanie.png" alt="Beanie" />
                        
                        <span class="post-card-author">
                            <a href="/author/Bean/">Beanie</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      6 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%9B%B9%EB%B7%B0%EC%97%90-%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C-%EA%B8%B0%EB%8A%A5-%EC%97%B0%EA%B2%B0%ED%95%B4%EC%84%9C-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EC%95%B1%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%9E%90">
                <div class="post-card-image" style="background-image: url(/assets/img/post_images/catty_cover2.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%9B%B9%EB%B7%B0%EC%97%90-%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C-%EA%B8%B0%EB%8A%A5-%EC%97%B0%EA%B2%B0%ED%95%B4%EC%84%9C-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EC%95%B1%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%9E%90">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Catty</span>
                            
                        
                    

                    <h2 class="post-card-title">(작성중) 리액트 웹뷰에 네이티브 기능 연결해서 하이브리드 앱을 만들자</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>기존에 Catty 모바일앱은 안드로이드 네이티브로 개발해서 운영하고 있었는데, 아무래도 유지보수에 시간이 많이 들고 추가로 iOS 앱을 개발한다고 생각했을 때 iOS앱도 똑같이 네이티브로 다 개발해야 하는 문제가 있었다. 그래서 네이티브 100%를 하이브리드(웹뷰+네이티브 구조)로 변경하여</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/img/style/beanie.png" alt="Beanie" />
                        
                        <span class="post-card-author">
                            <a href="/author/Bean/">Beanie</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="http://localhost:4000/">
            
                <img src="/assets/img/favicons/favicon-32x32.png" alt="PIGBEAN Tech blog icon" />
            
            <span>PIGBEAN Tech blog</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Firestore 내용 검색 가능하게 만들기 (Feat. Typesense)</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Firestore+%EB%82%B4%EC%9A%A9+%EA%B2%80%EC%83%89+%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C+%EB%A7%8C%EB%93%A4%EA%B8%B0+%28Feat.+Typesense%29&amp;url=https://beanie00.github.io/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://beanie00.github.io/Firestore-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%83%89-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0-(feat-Typesense)"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://localhost:4000/">PIGBEAN Tech blog</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
