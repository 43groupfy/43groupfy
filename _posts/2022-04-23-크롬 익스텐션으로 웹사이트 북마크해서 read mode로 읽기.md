---
title: 크롬 익스텐션으로 웹사이트 북마크해서 read mode로 읽기
author: Bean
date: 2022-04-23 16:32:00 +0800
categories: [Web frontend, React]
tags: [Catty, Extension]
layout: post
current: post
class: post-template
subclass: 'post'
navigation: True
cover:  assets/img/post_images/readmode_cover.jpg
---

웹사이트에서 뉴스나 미디엄(Medium) 등의 블로그 글을 읽을 때, 광고나 기타 불필요한 정보를 제거하고 본문 내용만 집중해서 볼 수 있으면 편리할 것이다. 크롬 확장 프로그램 중에는 웹사이트를 읽기모드로 바꿔주는 기능의 앱도 인기를 끌고 있다.

<div style="text-align: left">
   <img src="/assets/img/post_images/read-mode1.png" />
</div>

&nbsp;

Catty 서비스의 크롬 익스텐션에도 현재 띄워져 있는 화면의 웹사이트를 수집할 때, 해당 사이트의 Readable html(읽기에 편한 요소만 분리한 html)를 함께 저장하여 웹앱에서 읽기모드로 확인할 수 있도록 기능 구현을 해두었다. 그리고 이번 글에서 이 읽기모드 구현에 대해 정리해두려고 한다.

## 읽기모드를 어떻게 구현하면 좋을까?
---

읽기모드를 구현하려면 웹페이지에서 본문만 추출해 낼 필요가 있지만, 모든 블로그는 독자적인 포맷을 가지고 있고, 이 각각의 포맷들을 하나하나 분석해가며 본문을 찾아내는 건 많은 수고를 필요로 한다. 다행히 이런 수고스러움을 덜어주는 고마운 라이브러리가 있다. 바로 `mozilla/readability` 라이브러리([https://github.com/mozilla/readability](https://github.com/mozilla/readability))이다.

이 라이브러리는 모질라에서 개발중인 노드js 라이브러리로 파이어폭스의 일기모드 기능을 독립적으로 제공한다.

이 라이브러리 사용법은 간단하다. 우선 크롬익스텐션에서 북마크를 저장할 때 readable HTML을 구할 것이므로 북마크 저장 코드가 구현되어 있는 content_script.js에 아래 코드를 구현하였다. readability 라이브러리를 import하고 아래 코드를 실행하면 읽기모드의 html 코드를 구할 수 있다.

```javascript
function getReadableHtml() {
  const readability = new Readability(document.cloneNode(true));
  const article = readability.parse();

  if (!article) throw new Error('Could not parse HTML document with Readability');

  return {
    title: article.title,
    body: article.content,
  };
}
```

&nbsp;

***

#### 참고 내용 출처 :
[https://www.44bits.io/ko/post/generate-full-feed-by-using-mozilla-readability](https://www.44bits.io/ko/post/generate-full-feed-by-using-mozilla-readability)