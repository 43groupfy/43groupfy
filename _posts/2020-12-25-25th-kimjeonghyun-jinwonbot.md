---
title: 진원봇 : 바라미실 문 개폐 알림 봇
author: Jeonghyun Kim (kimdictor@gmail.com)
date: 2020-12-25 22:00:00 +0900
categories: [Exhibition,2020년]
tags: [post,kimjeonghyun]     # TAG names should always be lowercase, 띄어쓰기도 금지 
---

# 진원봇 : 바라미실 문 개폐 알림 봇
진원봇(jinwonbot)은 바라미실 문 개폐 여부를 원격지에서 확인할 수 있는 채팅 봇입니다. 

## 개발 동기
바라미실의 출입문이 열려있는지의 여부는 준회원의 동아리실 출입을 도와주거나 재실 인원이 있는지 확인하기 위해 지속적인 수요가 존재해왔습니다.
이 때문에 이전부터 *바라미캠(2016, 송유진)* 과 *바라미는 열렸는가?(2017, 김상윤 외 2명)* 와 같이 바라미실 문 개폐 여부를 확인하기 위한 다양한 형태의 작품이 출품되어왔습니다.
진원봇은 이러한 시도를 집대성해 쉽게 접근할 수 있고 정확하고 다양한 정보를 제공하는 것에 초첨을 맞춘 작품입니다.

## 설계
개발 동기에도 언급하였듯이, 본 작품의 설계에서 아래와 같은 이전 작품들의 시행착오를 많이 참고했습니다. 
- **바라미캠**의 경우, 웹 프론트엔드의 요청이 발생하면 라즈베리파이 백앤드에서 웹캠으로 이미지를 촬영하고 이를 정적 파일로 바라미 서버에 업로드하면 이를 웹 서버가 서빙하는 구조로 보입니다.
이런 구조의 경우 제공된 사진을 사람이 직접 해석하여 개폐 여부를 판단해야 했습니다. (물론 이 해석 과정을 자동화하는 것도 불가능하진 않겠지만 절대 쉬운 과정은 아닐 것 같습니다.)
- **바라미는 열렸는가?** 의 경우, SECOM 보안 단말기의 문 잠금 여부 표시등에 CDS를 부착해 점등 여부로 개폐 여부를 결정하고 라즈베리파이에서 정적 파일을 생성해 웹 서버가 서빙하는 구조로,
CDS가 표시등 이외 주변 불빛을 감지하지 못하게 방지하는 차폐의 문제로 가끔 올바르게 감지하지 못하는 문제가 있었습니다.

위에 언급한 것과, 다른 부가적인 시행착오를 바탕으로 도출할 수 있었던 설계 중점과 그 결과는 아래와 같았습니다.
- 채팅 봇의 생명인 접근성을 확보하기 위해 다양한 형태의 프론트엔드 *(예: 웹, 카카오톡 플친, 디스코드)* 를 구현할 수 있는 구조 : 백앤드와 프론트앤드가 격리된 구조, 범용성있는 HTTP REST API
- 현재 상태만 확인하는 것에서 국한되지 않고 통계와 같은 다양한 기록을 제공하기 위해 과거의 기록을 유지 : 백앤드에 상태를 저장하는 DB 포함
- 많은 요청 수 처리 성능 : 스레드 안전한 요청 핸들러 구현하고 고루틴(golang에서 제공하는 일종의 경량 스레드)을 적극 활용 
- 서버 운영 안정성과 편의성 충족 : 백앤드 언어로 거의 모든 OS, 아키텍처 크로스 컴파일 지원하는 golang을 채택하고 컨테이너 가상화

## 구조
본 작품은 크게 문 개폐 여부를 센싱하는 센서 부와 센싱 정보를 처리하여 저장하고 API를 통해 정보를 제공하는 백앤드, 받아온 정보를 가공하여 보기 쉽게 표시하는 프론트앤드 세 부분으로 나뉩니다.
<img src="/assets/img/post/2020-12-25-25th-kimjeonghyun-jinwonbot/structure.png" width="100%"> 

## 시연 사진

## 개선할 점
